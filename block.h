#pragma once
#include <ctime>
#include <iostream>
#include <ncurses.h>
#include <stdlib.h>

typedef unsigned int BYTE;

// Class Block
template <class Item> class Block {
  public:
    Block() // Constructor
    {
        block = {
            0,
        };
    }

    Block(int index) // 블록 번호를 전달 받는 Constructor
    {
        Item blocks[46][5][5] = {

            // 0 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {1, 1, 1, 1, 1},
             {0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0}},

            // 1 block
            {{0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0}},
            // 2 block
            {{0, 0, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 1, 0, 0, 0},
             {0, 1, 0, 0, 0},
             {0, 0, 0, 0, 0}},
            // 3 block
            {{0, 0, 0, 0, 0},
             {0, 1, 0, 0, 0},
             {0, 1, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 0, 0}},
            // 4 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 0, 0}},

            // 5 block
            {{0, 0, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 0, 0}},

            // 6 block
            {{0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 0, 0}},

            // 7 block
            {{0, 0, 0, 0, 0},
             {0, 1, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 1, 0, 0, 0},
             {0, 0, 0, 0, 0}},

            // 8 block
            {{0, 0, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0}},

            // 9 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 0, 0}},

            // 10 block
            {{0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 0, 0}},

            // 11 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 1, 0, 1, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 0, 0}},

            // 12 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 1, 0, 1, 0},
             {0, 0, 0, 0, 0}},

            // 13 block
            {{0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0}},
            // 14 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 1, 1, 1, 1},
             {0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0}},
            // 15 block
            {{0, 0, 0, 0, 0},
             {0, 1, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 0, 1}},
            // 16 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 1},
             {0, 0, 0, 1, 0},
             {0, 0, 1, 0, 0},
             {0, 1, 0, 0, 0}},

            // 17 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 0, 0}},

            // 18 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 0, 0}},

            // 19 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 0, 0}},

            // 20 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 1, 0, 0, 0},
             {0, 0, 0, 0, 0}},

            // 21 block
            {{0, 0, 0, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 0, 0}},

            // 22 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 1, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 0, 0}},

            // 23 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 0, 0}},
            // 24 block
            {{0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 0, 0}},

            // 25 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 0, 0}},
            // 26 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 0, 0}},
            // 27 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 0, 0}},
            // 28 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 1, 1, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 0, 0}},

            // 29 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 0, 0}},

            // 30 block
            {{0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 0, 0}},

            // 31 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 1, 1, 0, 0},
             {0, 0, 0, 0, 0}},

            // 32 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 0, 0}},

            // 33 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 0, 0}},

            // 34 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 0, 0}},

            // 35 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 0, 0}},

            // 36 block
            {{0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 0, 0}},

            // 37 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 1, 1, 1, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0}},
            // 38 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 1, 0, 0},
             {0, 1, 0, 0, 0},
             {0, 0, 0, 0, 0}},
            // 39 block
            {{0, 0, 0, 0, 0},
             {0, 1, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 0, 0}},
            // 40 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0}},

            // 41 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 0, 0}},

            // 42 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 0, 0}},

            // 43 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 0, 0, 0}},

            // 44 block
            {{0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 1, 0, 0},
             {0, 0, 0, 0, 0},
             {0, 0, 0, 0, 0}},

            // 45 block
            {{0, 0, 0, 0, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 1, 0},
             {0, 0, 1, 1, 0},
             {0, 0, 0, 0, 0}}};

        for (int i = 0; i < 5; i++) {
            for (int j = 0; j < 5; j++) {
                block[i][j] = blocks[index][i][j];
            }
        }
    }
    // Copy constructor
    Block(const Block<Item> &source) { block = source.block; }

    // 블록을 반환시 동적 배열로 반환
    Item **get_dynamic_block() {
        int i, j;
        Item **dynamic_block = (Item **)malloc(sizeof(Item *) * 5);
        for (i = 0; i < 5; i++)
            dynamic_block[i] = (Item *)malloc(sizeof(Item) * 5);
        for (i = 0; i < 5; i++)
            for (j = 0; j < 5; j++)
                dynamic_block[i][j] = block[i][j];
        return dynamic_block;
    }

    // 블럭을 클래스가 아닌 2차원 동적 배열로 반환
    Item **Copy_block(const Block<Item> &source) {
        int i, j;
        Item **Copy_blc = (Item **)malloc(sizeof(Item *) * 5);
        for (i = 0; i < 5; i++)
            Copy_blc[i] = (Item *)malloc(sizeof(Item) * 5);
        for (i = 0; i < 5; i++)
            for (j = 0; j < 5; j++)
                Copy_blc[i][j] = source.block[i][j];
        return Copy_blc;
    }

    // 블럭 값 출력 함수(블럭 확인용)
    void print_block() {
        int i, j;
        for (i = 0; i < 5; i++) {
            for (j = 0; j < 5; j++) {
                std::cout << block[i][j];
            }
            printf("\n");
        }
    }

    // 모양이랑 위치는 화면 크기에 맞게 나중에 수정하려 합니다
    void draw_box(WINDOW *win, int y, int x) {
        int i, j;
        int k, l;
        for (i = 0; i < 5; i++) {
            for (j = 0; j < 5; j++) {
                if (block[i][j] == 1) {
                    mvwprintw(win, y + i, x + j, "*");
                    // mvwprintw(win, y + i, x + j, );
                    //  mvwprintw(win, y + 2 * i - 1, x + 2 * j + 1, "_");
                    //  mvwprintw(win, y + 2 * i, x + 2 * j, "|");
                    //  mvwprintw(win, y + 2 * i, x + 2 * j + 1, "_");
                    //  mvwprintw(win, y + 2 * i, x + 2 * j + 2, "|");
                }
            }
        }
    }

  private:
    Item block[5][5]; // 2차원 배열로 블럭값 저장
};

